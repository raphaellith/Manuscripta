# Generative AI Component Specifications (Windows)

## Explanatory Note

This document defines the specifications for classes enabling the `Main` component to access generative AI (GenAI) functionalities provided by Granite and Ollama.



## Section 1 - General Principles

(1) All GenAI functionalities of the Windows application must be provided by the large language model (LLM) Granite 4.0, hereafter referred to with its Ollama model name `granite4`. The `granite4` model must be locally hosted and run via Ollama.

(2) Ollama is assumed to have been installed silently during the installation of the Windows application.

(3) All calls to Ollama and the `granite4` model must be performed by calling a method belonging to one of the following classes. All classes listed below must inherit the superclass `AiWorkflowService`.

    (a) `ReadingGenerationAiWorkflowService`: For creating a reading material based on requirements inputted by the user.

    (b) `WorksheetGenerationAiWorkflowService`: For creating a worksheet material based on requirements inputted by the user.

    (c) `FeedbackGeneratationAiWorkflowService`: For generating feedback to student responses.




## Section 2 - Requirements for `AiWorkflowService` and its Subclasses

### Section 2A - `AiWorkflowService`

(1) `AiWorkflowService` must provide the following methods.

    (a) `public async Task<string> GetChatResponseAsync(string prompt)`: After receiving a prompt,
    
        (i) runs `ollama list` to verify that `granite4` is locally available via Ollama, and runs `ollama pull granite4` to install the model if it is not.

        (ii) runs `curl http://localhost:11434` to verify that Ollama's core daemon server is in operation, and runs `ollama serve` to start the server if it is not.

        (iii) asynchronously returns the chat response generated by `granite4` based on the inputted prompt.



## Section 2B - `ReadingGenerationAiWorkflowService`

(1) `ReadingGenerationAiWorkflowService` must provide the following methods.

    (a) `public async Task<string> GenerateReading(string description, int readingAge, int actualAge, int durationInMinutes, List<SourceDocumentEntity> sourceDocuments)`: Generates a reading material based on the given description, reading age, actual age, approximation duration (in minutes) and source documents.



## Section 2C - `WorksheetGenerationAiWorkflowService`

(1) `WorksheetGenerationAiWorkflowService` must provide the following methods.

    (a) `public async Task<string> GenerateWorksheet(string description, int readingAge, int actualAge, int durationInMinutes, List<SourceDocumentEntity> sourceDocuments)`: Generates a worksheet material based on the given description, reading age, actual age, approximation duration (in minutes) and source documents.



## Section 2D - `FeedbackGeneratationAiWorkflowService`

(1) `FeedbackGeneratationAiWorkflowService` must provide the following methods.

    (a) `public async Task<string> GenerateFeedback(QuestionEntity question, ResponseEntity response)`: Generates feedback for a student's response to a question.


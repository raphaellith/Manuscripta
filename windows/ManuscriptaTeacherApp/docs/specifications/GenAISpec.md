# Generative AI Component Specifications (Windows)

## Explanatory Note

This document defines the specifications for classes enabling the `Main` component to access generative AI (GenAI) functionalities provided by IBM Granite and Ollama.



## Section 1 - General Principles

(1) All GenAI functionalities of the Windows application must be provided by the large language model (LLM) Granite 4.0, which must be locally hosted and run via Ollama.

(2) The Windows application must locally store a copy of `ollama-granite.exe`, the Windows installer executable file officially provided by Ollama.

(3) On startup, the Windows application must

    (a) detect whether Ollama is installed by running `ollama --version`. If not, it must run `ollama-granite.exe`, allowing the user to set up Ollama and add its executable to the user's PATH environment variable.

    (b) detect whether Granite 4.0 (named `granite4`) is locally available via Ollama by running `ollama list`. If not, it must run `ollama pull granite4` to install the model locally.

    (c) run the command `ollama serve` to start the core daemon server for Ollama.

(4) Any call to Granite must be performed by calling a method belonging to one of the following classes. All classes listed below must inherit the superclass `AiWorkflowService`.

    (a) `ReadingGenerationAiWorkflowService`: For creating a reading material based on requirements inputted by the user.

    (b) `WorksheetGenerationAiWorkflowService`: For creating a worksheet material based on requirements inputted by the user.

    (c) `FeedbackGeneratationAiWorkflowService`: For generating feedback to student responses.




## Section 2 - Requirements for `AiWorkflowService` and its Subclasses

### Section 2A - `AiWorkflowService`

(1) `AiWorkflowService` must provide the following methods.

    (a) `public async Task<string> GetChatResponseAsync(string prompt)`: Receives a prompt and asynchronously returns the output generated by Granite.



## Section 2B - `ReadingGenerationAiWorkflowService`

(1) `ReadingGenerationAiWorkflowService` must provide the following methods.

    (a) `public async Task<string> GenerateReading(string description, int readingAge, int actualAge, int durationInMinutes, List<SourceDocumentEntity> sourceDocuments)`: Generates a reading material based on the given description, reading age, actual age, approximation duration (in minutes) and source documents.



## Section 2C - `WorksheetGenerationAiWorkflowService`

(1) `WorksheetGenerationAiWorkflowService` must provide the following methods.

    (a) `public async Task<string> GenerateWorksheet(string description, int readingAge, int actualAge, int durationInMinutes, List<SourceDocumentEntity> sourceDocuments)`: Generates a worksheet material based on the given description, reading age, actual age, approximation duration (in minutes) and source documents.



## Section 2D - `FeedbackGeneratationAiWorkflowService`

(1) `FeedbackGeneratationAiWorkflowService` must provide the following methods.

    (a) `public async Task<string> GenerateFeedback(QuestionEntity question, ResponseEntity response)`: Generates feedback for a student's response to a question.

